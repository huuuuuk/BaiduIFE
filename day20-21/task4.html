<!DOCTYPE html>
<html lang = "zh-cn">
    <head>
        <meta charset="utf-8">
        <title>task04</title>
        
    </head>
    <body>
        <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
        <button id="fade-btn">淡出</button>
        <script>
            var div = document.querySelector("div");
            div.style.opacity=1;
            var btn = document.querySelector("button");
            btn.addEventListener("click",game);
            function game(){
                if (btn.textContent==="淡出"){
                    fade();
                }else if(btn.textContent==="淡入"){
                    refade()
                }

            }
            
            function fade() {
                btn.disabled=true;
                div.style.opacity -=0.01;
                console.log("fade");
                
                
                tims =setTimeout(fade,20);
                if (div.style.opacity==0){
                    clearTimeout(tims);
                    btn.textContent = "淡入";
                    btn.disabled=false;

                }
            }
            function refade() {
                btn.disabled=true;
                
                div.style.opacity =Number(div.style.opacity) + 0.01;
                console.log(div.style.opacity);
                
                
                
                tims =setTimeout(refade,20);
                if (div.style.opacity==1){
                    clearTimeout(tims);
                    btn.textContent = "淡出";
                    btn.disabled=false;

                }
            }
        </script>
    </body>

</html>